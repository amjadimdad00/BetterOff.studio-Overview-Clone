"use client";

import { useEffect, useRef } from "react";
import gsap from "gsap";

const AnimatedLoader = () => {
  const maskRef = useRef<SVGRectElement>(null);

  useEffect(() => {
    const tl = gsap.timeline();
    tl.to(maskRef.current, {
      attr: { y: 64, height: 96 },
      duration: 1,
      ease: "power2.out",
    });
    tl.to(maskRef.current, {
      attr: { y: 0, height: 160 },
      duration: 1,
      ease: "power2.inOut",
      delay: 0.2,
    });
  }, []);

  return (
    <div className="flex items-center justify-center h-screen bg-[#1e1e1e]">
      <svg
        viewBox="0 0 279 161"
        width="279"
        height="161"
        xmlns="http://www.w3.org/2000/svg"
        className="w-[251px] h-[145px]"
      >
        <defs>
          <mask id="whiteFillMask">
            <rect x="0" y="0" width="100%" height="100%" fill="#4b4b4b" />
            <rect
              ref={maskRef}
              x="0"
              y="160"
              width="100%"
              height="0"
              fill="white"
            />
          </mask>
        </defs>
        <g fill="#ffffff" mask="url(#whiteFillMask)">
          <path d="M139.483 161C62.5829 161 0 126.018 0 83C0 39.9816 62.5829 5 139.483 5C216.383 5 278.966 39.9816 278.966 83C278.966 126.018 216.383 161 139.483 161ZM139.483 11.6695C66.3061 11.6695 6.76938 43.6832 6.76938 83C6.76938 122.317 66.3061 154.33 139.483 154.33C212.66 154.33 272.197 122.317 272.197 83C272.197 43.6832 212.694 11.6695 139.483 11.6695Z" />
          <path d="M139.484 161C95.8218 161 60.3164 126.018 60.3164 83C60.3164 39.9816 95.8556 5 139.484 5C183.113 5 218.652 39.9816 218.652 83C218.652 126.018 183.147 161 139.484 161ZM139.484 11.6695C99.5788 11.6695 67.0858 43.6832 67.0858 83C67.0858 122.317 99.5788 154.33 139.484 154.33C179.39 154.33 211.883 122.317 211.883 83C211.883 43.6832 179.424 11.6695 139.484 11.6695Z" />
          <path d="M63.698 79.665H3.38281V86.3346H63.698V79.665Z" />
          <path d="M275.581 79.665H215.266V86.3346H275.581V79.665Z" />
          <path d="M146.118 51.4197C78.3907 51.4197 25.0819 44.4167 24.2695 44.3167L25.1834 37.7139C26.368 37.8806 145.441 53.4539 253.582 37.7139L254.564 44.3167C218.009 49.6523 180.202 51.4197 146.085 51.4197H146.118Z" />
          <path d="M251.516 128.353C250.332 128.186 133.357 112.613 25.2159 128.353L24.2344 121.75C133.357 105.843 251.246 121.583 252.43 121.75L251.516 128.353Z" />
          <path d="M142.867 8.33496H136.098V48.1186H142.867V8.33496Z" />
          <path d="M142.867 117.915H136.098V156.498H142.867V117.915Z" />
          <path d="M85.0586 97.9064V66.9932H99.5451C106.044 66.9932 109.598 69.6276 109.598 74.7632C109.598 78.5648 107.33 80.4322 104.724 81.2993V81.3993C108.007 81.9662 110.816 84.2005 110.816 88.8358C110.816 95.1385 106.619 97.9064 100.12 97.9064H85.0586ZM98.1573 79.6319C101 79.6319 102.625 78.7315 102.625 76.0971C102.625 73.4626 100.865 72.5622 98.2927 72.5622H91.7941V79.6652H98.1573V79.6319ZM98.4958 92.3707C102.321 92.3707 103.844 91.0701 103.844 88.1689C103.844 85.2676 102.05 83.9671 98.7666 83.9671H91.7941V92.3373H98.4958V92.3707Z" />
          <path d="M112.27 82.4329C112.27 73.1289 118.024 66.3594 127.771 66.3594C137.519 66.3594 143.273 73.1289 143.273 82.4329C143.273 91.7369 137.485 98.5398 127.771 98.5398C118.057 98.5398 112.27 91.7702 112.27 82.4329ZM136.301 82.4329C136.301 76.6971 134.067 71.8284 127.738 71.8284C121.408 71.8284 119.242 76.6638 119.242 82.4329C119.242 88.202 121.374 93.0708 127.738 93.0708C134.101 93.0708 136.301 88.202 136.301 82.4329Z" />
          <path d="M145.305 76.7641C145.305 70.7615 149.908 66.293 155.797 66.293C161.687 66.293 166.29 70.7282 166.29 76.7641C166.29 82.8 161.687 87.2353 155.797 87.2353C149.908 87.2353 145.305 82.8 145.305 76.7641ZM163.954 76.7308C163.954 71.6619 160.705 68.2271 155.797 68.2271C150.889 68.2271 147.64 71.6953 147.64 76.7308C147.64 81.7663 150.889 85.3011 155.797 85.3011C160.705 85.3011 163.954 81.8996 163.954 76.7308ZM151.262 82.3999V70.9616H156.542C159.114 70.9616 160.671 72.1288 160.671 74.2964C160.671 75.8637 159.757 76.7975 158.302 77.1643C161.247 77.6978 160.231 82.0997 160.874 82.2665V82.4332H157.591C156.982 81.9663 158.031 78.3981 155.459 78.3981H154.443V82.4332H151.296L151.262 82.3999ZM155.594 75.9971C156.745 75.9971 157.523 75.5969 157.523 74.5632C157.523 73.5294 156.745 73.1959 155.594 73.1959H154.41V75.9971H155.594Z" />
          <path d="M167.676 87.4352H174.547C174.682 91.2035 177.356 93.1043 181.79 93.1043C185.479 93.1043 187.002 91.6036 187.002 89.5027C187.002 86.4014 183.888 85.7345 179.048 84.4006C173.768 82.8999 168.725 80.9991 168.725 75.3634C168.725 69.1274 173.633 66.3262 180.402 66.3262C187.679 66.3262 192.993 70.0278 193.298 76.2971H186.461C186.021 73.3959 183.99 71.7618 180.402 71.7618C177.458 71.7618 175.664 72.7623 175.664 74.8632C175.664 77.4643 177.999 78.1312 181.993 79.265C188.018 80.8991 193.941 82.4664 193.941 88.9025C193.941 94.6049 189.744 98.5066 181.891 98.5066C174.039 98.5066 167.811 94.4382 167.676 87.4018V87.4352Z" />
        </g>
      </svg>
    </div>
  );
};

export default AnimatedLoader;
